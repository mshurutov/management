Конфигурации и список параметров СУБД PostgreSQL.
=================================================

`Postgres` может использоваться в следующих конфигурациях:
* одиночный хост;
* связка мастер-реплика;
* отказоустойчивый кластер;

Соответственно, минимальные телодвижения необходимы для одиночного хоста (при этом необходимо учитывать, что к одиночному хосту может быть подключена реплика, или на базе хоста будет развёрнут отказоустойчивый кластер).<BR>
Связка мастер-реплика, помимо базовых настроек, включает в себя настройки репликации.<BR>
Кластерное решение, помимо самого постгреса требует установки и настройки кластерного ПО.

Настройка одиночного хоста.
---------------------------

### Программное обеспечение.

Пакеты, необходимые в любом случае:
* сервер СУБД `PostgresQL`;
* пакет, содержащий `contrib`-ы - поставляемый производителей СУБД набор расширений.

### Настройка операционной системы.

При разворачивании СУБД PostgresQL необходимо установить следующие параметры:
```
vm.overcommit_memory = 2
vm.overcommit_ratio = 90
vm.swappiness = 5
```

Помимо этого, ведущие эксперты-эксплуатанты настоятельно рекомендуют установить более агрессивные  параметры очистки кэша файловой системы, чтобы не копить изменения.

### Конфигурационные параметры.

```
# Параметры подключения:
listen_addresses = '*'
port = 5432 # Порт может быть нестандартным, например, при использовании проху/пула соединений
max_connections = 100
password_encryption = scram-sha256
```

### Параметры `pg_hba.conf`.

```
local all         postgres              peer
host  all         all      127.0.0.1/32 scram-sha256
host  all         all      ::1/128      scram-sha256
host  all         postgres 0.0.0.0/0    reject
host  replication repluser samenet      scram-sha256
host  all         all      samenet      scram-sha256
```

Кластеры. `Patroni`.
------------------

Кластеры. `Srolon`.
-----------------

Кластеры. `Corosync+pacemaker`.
-----------------------------


